<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- If you are using the X-UA-Compatible META tag you want to place it as close to the top of the page's HEAD as possible. Internet Explorer begins interpreting markup using the latest version. When Internet Explorer encounters the X-UA-Compatible META tag it starts over using the designated version's engine. This is a performance hit because the browser must stop and restart analyzing the content. -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <title>Number Facts</title>
    <style media="screen">
      #fact {
        display: none
      }
    </style>
  </head>
  <body class="bg-dark">
    <div class="container">
      <div class="row">
        <div class="col-md-6 mx-auto">
          <div class="card bg-primary text-white mt-5 p-4">
            <h1>Number Facts</h1>
            <p>Enter a number and get a random fact</p>
            <input type="number" class="form-control form-control-lg" id="numberInput" placeholder="Enter any number">
            <div id="fact" class="card-body">
              <h4 class="card-title">Number Fact</h4>
                <p id="factText" class="card-text"></p>
            </div>
          </div>
        </div>

      </div>
    </div>
    <script type="text/javascript">
      let fact = document.querySelector('#fact');
      let factText = document.querySelector('#factText');

      let numberInput = document.querySelector('#numberInput');
      numberInput.addEventListener('input', getFactFETCH);

      // function getFactAJAX(){
      //   let number = numberInput.value;
      //
      //   // using XHR:
      //   let xhr = new XMLHttpRequest();
      //   xhr.open('GET', 'http://numbersapi.com/' + number);
      //   xhr.onload = function(){
      //     if(this.status === 200 && number != ''){
      //       fact.style.display  = 'block';
      //       factText.innerText = this.responseText;
      //     }else{
      //       console.log("error");
      //     }
      //   }
      //   xhr.send();
      // }

      function getFactFETCH(){
        let number = numberInput.value;

        fetch('http://numbersapi.com/' + number)
        // if we were receiving a JSON obj, we would set this to response.json() instead of response.text()
        .then(response => response.text())
        .then(data => {
          console.log(data);
          if(number != ''){
            fact.style.display  = 'block';
            factText.innerText = data;
          }else{
            console.log("error");
          }

        })
        .catch(err => console.log(err));
      }
    </script>
  </body>
</html>
